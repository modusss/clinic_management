<%#
  Global Loading Overlay - Tailwind CSS Version
  =============================================
  Full-screen loading indicator for clinic_management engine.
  Shows when Turbo requests exceed 2 seconds.

  Uses emerald color scheme to match engine's design.
  ESSENTIAL: Must be rendered as first child of body for z-index stacking.

  Related files:
  - clinic_management/app/views/layouts/clinic_management/application.html.erb
  - clinic_management/app/views/layouts/clinic_management/self_booking.html.erb

  Accessibility (WCAG 2.1 AA):
  - aria-hidden: hides from screen readers when not visible
  - role="status": announces changes without interrupting user
  - sr-only span: provides text for screen readers
%>

<div
  id="global-loading-overlay"
  class="fixed inset-0 z-[9999] bg-white/90 flex items-center justify-center opacity-0 invisible pointer-events-none transition-all duration-200"
  aria-hidden="true"
  role="status"
  aria-label="Carregando conteudo"
>
  <div class="bg-white rounded-2xl shadow-xl p-8 flex flex-col items-center gap-4" style="animation: globalLoadingPopIn 250ms ease-out;">
    <%# Tailwind Spinner SVG - Emerald color to match engine design %>
    <svg class="animate-spin h-12 w-12 text-emerald-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
      <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
      <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
    </svg>

    <p class="text-gray-600 font-medium text-base">Carregando...</p>

    <%# Screen reader only text %>
    <span class="sr-only">Carregando conteudo, por favor aguarde</span>
  </div>
</div>

<style>
  @keyframes globalLoadingPopIn {
    from {
      opacity: 0;
      transform: scale(0.95) translateY(10px);
    }
    to {
      opacity: 1;
      transform: scale(1) translateY(0);
    }
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    #global-loading-overlay,
    #global-loading-overlay > div {
      animation: none !important;
      transition: none !important;
    }
  }
</style>
