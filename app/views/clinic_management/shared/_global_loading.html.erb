<%#
  Global Loading Notice - Tailwind CSS Version
  ============================================
  Discreet, non-blocking loading notice for clinic_management engine.
  It appears at the bottom when requests exceed 2 seconds.

  ESSENTIAL: This must never behave like a modal or block any clicks.
  It is only a passive status indicator.
%>

<div
  id="global-loading-overlay"
  class="fixed left-1/2 -translate-x-1/2 z-[10050] opacity-0 invisible pointer-events-none transition-all duration-200"
  style="bottom: 72px;"
  aria-hidden="true"
  role="status"
  aria-label="Carregando conteudo"
>
  <div id="global-loading-content" class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full border border-gray-300/80 bg-white/95 shadow-sm max-w-[92vw]">
    <span class="h-1.5 w-1.5 rounded-full bg-emerald-600 global-loading-dot" aria-hidden="true"></span>
    <p class="text-[11px] leading-none text-gray-600 font-medium m-0">Carregando...</p>

    <%# Screen reader only text %>
    <span class="sr-only">Carregando conte√∫do, por favor aguarde</span>
  </div>
</div>

<style>
  #global-loading-overlay.opacity-100 {
    transform: translateX(-50%) translateY(0);
  }

  #global-loading-overlay.opacity-0 {
    transform: translateX(-50%) translateY(8px);
  }

  @keyframes globalLoadingDotPulse {
    0%, 100% { opacity: 0.35; transform: scale(0.9); }
    50% { opacity: 1; transform: scale(1); }
  }

  .global-loading-dot {
    animation: globalLoadingDotPulse 1.1s ease-in-out infinite;
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    #global-loading-overlay,
    .global-loading-dot {
      transition: none !important;
      animation: none !important;
    }
  }

  @media screen and (max-width: 640px) {
    #global-loading-overlay {
      bottom: 64px !important;
    }
  }
</style>
