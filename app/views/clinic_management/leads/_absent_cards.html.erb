<%# Cards view for absent leads, using the same data as the table (rows) %>
<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
  <% rows.each_with_index do |row, index| %>
    <% lead = leads[index] %>
    <div class="bg-white rounded shadow p-4 mb-4 relative" id="lead-card-<%= lead.id %>">
      <% if rows.any? %>
        <%# Botões de ação no canto superior direito - Maiores e touch-friendly %>
        <% if params[:hidden_status] == "visible" || params[:hidden_status].blank? %>
          <div class="absolute top-2 right-2 flex flex-col sm:flex-row gap-2">
            <%= button_to clinic_management.hide_from_absent_lead_path(lead), 
                method: :patch,
                remote: true,
                data: { 
                  turbo_method: :patch,
                  turbo_stream: true,
                  confirm: "Tem certeza que deseja ocultar este lead da listagem?"
                },
                class: "bg-red-500 hover:bg-red-600 active:bg-red-700 text-white text-sm px-3 py-2 rounded-lg shadow-md min-w-[44px] min-h-[44px] flex items-center justify-center transition-all duration-200 transform hover:scale-105 active:scale-95",
                title: "Ocultar da lista" do %>
              <i class="fas fa-eye-slash text-base"></i>
            <% end %>
            
            <%= button_to clinic_management.mark_no_whatsapp_lead_path(lead), 
                method: :patch,
                remote: true,
                data: { 
                  turbo_method: :patch,
                  turbo_stream: true,
                  confirm: "Marcar este lead como 'Sem WhatsApp'?"
                },
                class: "bg-orange-500 hover:bg-orange-600 active:bg-orange-700 text-white text-sm px-3 py-2 rounded-lg shadow-md min-w-[44px] min-h-[44px] flex items-center justify-center transition-all duration-200 transform hover:scale-105 active:scale-95",
                title: "Sem WhatsApp" do %>
              <i class="fab fa-whatsapp text-base"></i>
            <% end %>
            
            <%= button_to clinic_management.mark_no_interest_lead_path(lead), 
                method: :patch,
                remote: true,
                data: { 
                  turbo_method: :patch,
                  turbo_stream: true,
                  confirm: "Marcar este lead como 'Sem interesse'?"
                },
                class: "bg-gray-500 hover:bg-gray-600 active:bg-gray-700 text-white text-sm px-3 py-2 rounded-lg shadow-md min-w-[44px] min-h-[44px] flex items-center justify-center transition-all duration-200 transform hover:scale-105 active:scale-95",
                title: "Sem interesse" do %>
              <i class="fas fa-times text-base"></i>
            <% end %>
          </div>
        <% else %>
          <div class="absolute top-2 right-2">
            <%= button_to clinic_management.restore_lead_lead_path(lead), 
                method: :patch,
                remote: true,
                data: { 
                  turbo_method: :patch,
                  turbo_stream: true,
                  confirm: "Tem certeza que deseja restaurar este lead na listagem principal?"
                },
                class: "bg-green-500 hover:bg-green-600 active:bg-green-700 text-white text-sm px-4 py-2 rounded-lg shadow-md min-h-[44px] flex items-center justify-center gap-2 transition-all duration-200 transform hover:scale-105 active:scale-95",
                title: "Restaurar na lista principal" do %>
              <i class="fas fa-undo text-base"></i> 
              <span class="hidden sm:inline">Restaurar</span>
            <% end %>
          </div>
        <% end %>
        
        <%# Exibe cada campo do row, com header e content, igual à tabela, mas em formato de cartão %>
        <% row.each do |cell| %>
          <div class="mb-2" id="<%= cell[:id] %>">
            <span class="block text-xs text-gray-500 font-semibold"><%= cell[:header] %></span>
            <span class="block text-base text-gray-800" style="margin-top: 10px;"><%= cell[:content] %></span>
          </div>
        <% end %>
      <% else %>
        <div class="bg-white rounded shadow p-4 mb-4">
          <span class="block text-base text-gray-800">Nenhum paciente agendado</span>
        </div>
      <% end %>
    </div>
  <% end %>
</div>

<%# Add pagination for cards view, just like the table view %>
<% if defined?(leads) && leads.size > 10 %>
  <%= paginate leads %>
<% end %> 

<style>
@media (max-width: 768px) {

  .pagination {
    flex-direction: column;
  }

  .pagination li {
    margin: 10px;
  }
}
</style>